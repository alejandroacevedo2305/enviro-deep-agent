# Failed Files Samples

This directory contains sample FAILED-*.md files for testing and debugging.

## Purpose

- **Testing**: Use these samples to test the optimizer without affecting main
  processing
- **Debugging**: Share specific failed cases for troubleshooting
- **Reproducibility**: Commit samples to git for consistent testing across
  machines

## Contents

These files are generated by `sample_fails.py` and represent random samples of
actual PDF parsing failures.

## Usage

### Create New Samples

```bash
# Sample 10 files
uv run python SimpleWorkflow/sample_fails.py --size 10

# Sample 30 files (recommended for optimizer)
uv run python SimpleWorkflow/sample_fails.py --size 30

# Sample all failed files
uv run python SimpleWorkflow/sample_fails.py --all
```

### Clear Samples

```bash
uv run python SimpleWorkflow/sample_fails.py --clear
```

## File Format

Each FAILED-*.md file contains:
- **Frontmatter**: Metadata about the failure (file_identifier, s3_key, error)
- **Traceback**: Full Python traceback of the error

Example:
```
---
file_identifier: 2163984847-ei-document-legislation-file_id_461074
status: FAILED
error: File is not a zip file
s3_key: sea-crawler/2163984847/.../file.pdf
---

# Processing Failed

Traceback (most recent call last):
  ...
```

## Testing with Samples

You can modify the optimizer to test against these samples instead of all
failed files:

```python
# In optimize_retry_workers.py
FAILED_SAMPLES_DIR = Path("SimpleWorkflow/ParsingFailsSamples")
failed_files = find_failed_files(FAILED_SAMPLES_DIR)
```

## Notes

- Files in this directory are committed to git (not in .gitignore)
- Samples are randomly selected each time the script runs
- Original files in ParsedFiles/ are never modified
- This replaces the old `ParsedFiles/failed_samples/` directory

